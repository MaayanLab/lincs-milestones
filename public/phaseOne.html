<!DOCTYPE html>
<html lang="en" ng-app="Milestones">
<head>
<title>Milestones</title>
<!-- CSS -->
<link rel="stylesheet" href="libraries/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="libraries/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="CSS/main.css">

<!-- libraries    -->
<script src="libraries/jquery/jquery.min.js"></script>
<script src="libraries/string/lib/string.min.js"></script>
<script src="libraries/underscore/underscore-min.js"></script>
<script src="libraries/angular/angular.js"></script>
<script src="libraries/angular-smart-table/dist/smart-table.min.js"></script>
<script src="versioned/libraries/ui-bootstrap-tpls-0.12.0.min.js"></script>

<!-- scripts -->
<script src="scripts/app.js"></script>
<script src="scripts/services.js"></script>
<script src="scripts/controllers.js"></script>
</head>
<body ng-controller="tableCtrl">
<div class="container">
    <div>Please send corrections and suggestions to <a href="mailto:sherry.jenkins@mssm.edu?Subject=[Milestones Website Improvement]">Sherry Jenkins</a>.</div>
    <div class="row download-spreadsheets">
        <div class="col-md-12">
            <a href="data/Milestones.zip">Download All Milestones Spreadsheets</a>
        </div>
    </div>
    <div class="row">
        <h1 class="col-md-12 milestones-title">LINCS Data Release Milestones</h1>
        <table class="table col-md-12" id="summary">
            <tbody>
            <tr>
                <td>
                    <span class="bigLetter">Centers:</span>
                    <span class="bigNum">{{summary.center}}</span>
                </td>
                <td>
                    <span class="bigLetter">Assays:</span>
                    <span class="bigNum">{{summary.assays}}</span>
                </td>
                <td>
                    <span class="bigLetter">Perturbagens:</span>
                    <span class="bigNum">~{{summary.perturbagens}}</span>
                </td>
                <td>
                    <span class="bigLetter">Cell-lines:</span>
                    <span class="bigNum">~{{summary.cellLines}}</span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="row">
        <table st-table="displayedDocs" st-safe-src="docs" class="table table-striped col-md-12">
            <thead>
                <tr>
                    <th>Phase</th>
                    <th st-sort="center">Center</th>
                    <th>Assay</th>
                    <th>Perturbagens</th>
                    <th>Cell-lines</th>
                    <th>Readouts</th>
                    <th st-sort="getters.release">Release<sup>***</sup></th>
                    <th>Status</th>
                </tr>
                <tr>
                    <th colspan="8">
                        <input placeholder="Global search. Example keywords: image, gene expression, phospho, etc.        Table can be sortable by Center and Release" st-search type="search" class="form-control" />
                    </th>
                </tr>
            </thead>
            <tbody>
            <tr ng-repeat="doc in displayedDocs">

                <td>
                    <p class="cell-data">{{doc['phase']}}</p>
                </td>

                <td class="center-name"><a href="{{centerMap.urls[doc['center']]}}" target="_blank"><img class="logo" ng-src="{{centerMap.logos[doc['center']]}}" />{{doc["center"]}}</a></td>
                <td><p class="cell-data">{{doc['assay']}}</p></td>
                <td>
                    <div ng-repeat="count in doc['perturbagens-count']">
                        <p class="cell-data" ng-if="!(count.type === 'TBD' && count.count === 'TBD')">{{count.type+" : "+count.count}}</p>
                        <p class="cell-data" ng-if="(count.type === 'TBD' && count.count === 'TBD')">Check Release for Data</p>
                    </div>
                </td>
                <td>
                    <div ng-repeat="count in doc['cell-lines-count']">
                        <p class="cell-data" ng-if="!(count.type === 'TBD' && count.count === 'TBD')">{{count.type+" : "+count.count}}</p>
                        <p class="cell-data" ng-if="(count.type === 'TBD' && count.count === 'TBD')"></p>
                    </div>
                </td>
                <td>
                    <div ng-repeat="readout in doc['readouts']">
                        <p class="cell-data">{{readout}}</p>
                        <p class="cell-data" ng-if="(readout === 'TBD')"></p>
                    </div>
                </td>
                <td>
                    <p class="cell-data"  ng-if="doc['release-date'] !== 'TBD'">{{doc['release-date']}}</p>
                    <p class="cell-data" ng-if="doc['release-date'] === 'TBD'"></p>

                </td>
                <td style="min-width: 80px;">
                    <span ng-if="!(doc['release-link'])" class="label label-warning"> In Production </span>
                    <a ng-if="doc['release-link']" style="width: 80px;"
                        class="label label-success" ng-href="{{doc['release-link']}}">    Available   </span>
                </td>
            </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="8" class="text-center">
                        <div st-pagination="" st-items-by-page="13" st-displayed-pages="7"></div>
                    </td>
                </tr>
                <tr>
                    <td colspan="8" style="border: none; font-size: 12px;">
                        <p><sup>***</sup> Only first level release dates are shown</p>
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>
</body>
</html>


